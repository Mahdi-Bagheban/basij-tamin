@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-Regular.woff2') format('woff2');font-weight:400;font-style:normal;font-display:swap}
@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-Medium.woff2') format('woff2');font-weight:500;font-style:normal;font-display:swap}
@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-SemiBold.woff2') format('woff2');font-weight:600;font-style:normal;font-display:swap}
@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-Bold.woff2') format('woff2');font-weight:700;font-style:normal;font-display:swap}
*{font-family:'Vazirmatn',sans-serif}

:root{
  --green-main:#1E5939;
  --green-accent:#28744a;
  --grad:linear-gradient(135deg,#1E5939 0%,#28744a 100%);
  --text:#163a25;
  --border:#d8e4d9;
}

html,body{height:100%}
body{
  margin:0;color:var(--text);
  background:var(--grad);background-size:400% 400%;animation:bgFlow 14s ease infinite;
  display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:24px
}
@keyframes bgFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

.pay-shell{width:100%;max-width:920px}
.pay-header{text-align:center;margin-bottom:24px}
.pay-header h1{margin:0;color:#fff;font-weight:800;font-size:1.4rem;text-shadow:0 2px 8px rgba(0,0,0,.28)}

.glass{
  background:rgba(255,255,255,.82);
  border:1px solid rgba(255,255,255,.46);
  border-radius:24px;
  box-shadow:0 12px 40px rgba(0,0,0,.16);
  -webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)
}
.form-container{padding:34px}

.grid{display:grid;gap:22px}
.grid.two{grid-template-columns:1fr 1fr}
@media (max-width:680px){.grid.two{grid-template-columns:1fr}}

.input-group label{display:block;margin:0 0 10px 0;font-weight:700}
.field-wrapper{position:relative;background:#fff;border:1.6px solid var(--border);border-radius:14px;min-height:56px;display:flex;align-items:center}
.field-wrapper input,.field-wrapper select{width:100%;border:0;background:transparent;padding:12px 14px;border-radius:14px;font-size:1rem;line-height:1.4}

.intents-wrapper{display:flex;flex-direction:column;gap:14px}
.intent-row{
  background:rgba(255,255,255,.92);
  border:1.2px solid #ddeee3;border-radius:14px;padding:12px 14px;
  display:flex;align-items:center;gap:12px;min-height:56px
}

/* دکمه‌ها ثابت در دو طرف، کادرها وسط */
.add-intent,.remove-intent{flex:0 0 40px}
.intent-select{flex:2 1 300px;min-width:170px}
.amount-select{flex:1 1 180px;min-width:150px;max-width:240px}
.custom-amount{flex:1 1 180px;min-width:150px;max-width:260px;display:none}
.custom-amount.show{display:block}

/* موبایل: هر ردیف تمام عرض، دکمه‌ها بالا/پایین و کادرها 100% */
@media (max-width:640px){
  .intent-row{
    flex-wrap:wrap;gap:10px 8px
  }
  .add-intent{order:1}
  .intent-select{order:2;flex:1 1 100%}
  .amount-select{order:3;flex:1 1 100%}
  .custom-amount{order:4;flex:1 1 100%}
  .remove-intent{order:5;margin-inline-start:auto}
}

/* دکمه‌های آیکنی */
.icon-btn{width:40px;height:40px;border-radius:10px;border:1.4px solid #dfe9e2;background:#fff;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}
.icon-btn img{width:18px;height:18px}
.icon-btn[disabled]{opacity:.30;cursor:not-allowed}
.icon-btn:hover:not([disabled]){background:#f2f8f4}

/* فیلدها */
.intent-select,.amount-select,.custom-amount{width:100%;padding:12px;border:1.4px solid var(--border);border-radius:10px;background:#fff;font-size:.98rem}
.intent-select{position:relative}
.intent-trigger{width:100%;padding:12px;border:1.5px solid var(--border);border-radius:10px;background:#fff;text-align:right;font-weight:700;cursor:pointer}
.intent-panel{position:absolute;top:calc(100% + 8px);right:0;min-width:220px;max-height:44vh;overflow:auto;background:#fff;border:1.6px solid #e0eee2;border-radius:12px;box-shadow:0 12px 24px rgba(0,0,0,.18);display:none;z-index:1000}
.intent-panel.open{display:block;animation:fadeIn .18s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
.intent-panel ul{list-style:none;margin:0;padding:7px}
.intent-panel li{margin:2px 0}
.intent-panel .menu-item{width:100%;text-align:right;border:none;background:transparent;padding:9px 12px;border-radius:8px;font-weight:700;cursor:pointer}
.intent-panel .menu-item:hover{background:#eef6f0;color:#28744a}
.intent-panel li.has-sub>.menu-item::after{content:'›';margin-right:8px;display:inline-block}
.intent-panel li.has-sub>div{display:none;padding-right:10px;border-right:2px solid #e9f2eb;margin-right:8px}
.intent-panel li.has-sub.open>div{display:block}

/* خلاصه پرداخت */
.summary{text-align:center;margin-top:18px}
.total-line{display:inline-flex;gap:8px;align-items:center;background:#fff;border:2px solid #28744a;border-radius:12px;padding:12px 18px;font-weight:800;color:#1E5939;margin:0 0 12px}
.btn{border:none;border-radius:12px;padding:14px 22px;font-weight:800;cursor:pointer}
.btn.primary{background:var(--grad);color:#fff;box-shadow:0 6px 20px rgba(40,116,74,.28)}
.btn.primary:hover{transform:translateY(-2px)}

/* فوتر */
.trust-footer{display:flex;flex-direction:column;align-items:center;gap:14px;margin-top:26px;padding:16px;background:rgba(255,255,255,.93);border-radius:16px}
.trust-logos{display:flex;gap:20px;align-items:center;flex-wrap:wrap;justify-content:center}
.trust-logos img{height:46px}

.divider{border:none;height:1px;background:linear-gradient(90deg,transparent,#d9e7da,transparent);margin:22px 0}
.error{display:block;color:#d32f2f;margin-top:6px;font-weight:700;font-size:.86rem}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:9999}
.modal.show{display:flex}
.modal-content{background:#fff;border-radius:18px;padding:28px;max-width:440px;width:92%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.35)}
.modal-content h3{margin:0 0 12px 0;color:#1E5939}
.modal-content p{margin:0 0 18px 0;line-height:1.7}
