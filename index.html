<!-- به نام خداوند بخشنده مهربان -->
<!doctype html>
<html lang="فا" dir="rtl" data-version="6.7.2">
<head>
  <!-- Version 6.7.2 -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="version" content="6.7.2">
  <title>درگاه پرداخت گروه جهادی بسیج شهدای سازمان تامین اجتماعی</title>

  <!-- dotLottie player (خود-میزبان؛ کل محتوای dist در assets/vendor/ باشد) -->
  <script type="module" src="assets/vendor/dotlottie-player.mjs"></script>
  <!-- فالبک: اگر مؤلفه ثبت نشد، از CDN بارگذاری شود -->
  <script type="module">
    (async () => {
      try {
        if (!customElements.get('dotlottie-player')) {
          await import('./assets/vendor/dotlottie-player.mjs');
        }
      } catch (e) {}
      if (!customElements.get('dotlottie-player')) {
        const s = document.createElement('script');
        s.type = 'module';
        s.src = 'https://cdn.jsdelivr.net/npm/@dotlottie/player-component@2/dist/dotlottie-player.mjs';
        document.head.appendChild(s);
      }
    })();
  </script>

  <style>
    :root{
      --bg:#0b3a22; --bg2:#0f4a2a; --fg:#e9fff0; --muted:#bfe9cf; --ink:#0b3a22;
      --footer-space: 44px; --gap: 14px;

      /* اندازه‌های واکنش‌گرا */
      --anim-min: 140px; --anim-fluid: 20vmin; --anim-max: 200px;
      --bar-w-min: 260px; --bar-w-fluid: 50vw; --bar-w-max: 520px;
      --bar-h: 46px;

      /* کنترل انیمیشن */
      --p: 0%;                         /* درصد پیشروی (با JS به‌روزرسانی می‌شود) */
      --shine-w: clamp(14px, 9vw, 54px);  /* پهنای خط نوری واکنش‌گرا */
      --shine-alpha: .50;              /* شدت نور مرکزی */
      --cap-w: clamp(10px, 6vw, 36px); /* پهنای کلاهک نوری جلویی */
      --cap-alpha: .65;                /* شدت نور کلاهک */
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      color:var(--fg);
      background:
        radial-gradient(1200px 800px at 20% -10%, #0a2f1c 0%, transparent 60%),
        radial-gradient(900px 700px at 120% 120%, #0c3f24 0%, transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      font-family:system-ui,-apple-system,Segoe UI,Roboto,IRANSans,Vazirmatn,Tahoma,sans-serif;
    }

    /* صفحه تک‌نما */
    .page{
      min-height:100vh;
      display:grid;
      grid-template-rows:auto 1fr auto;
      align-items:start;
      justify-items:center;
      row-gap:var(--gap);
      padding:16px 16px var(--footer-space);
    }

    /* عنوان تصویری */
    header.top{ width:100%; display:flex; justify-content:center; }
    .title-banner{
      width: clamp(220px, 24vw, 380px);
      height:auto; display:block; object-fit:contain;
      filter: drop-shadow(0 4px 14px rgba(0,0,0,.22));
    }

    /* لودینگ */
    .loader{
      place-self:center;
      display:grid;
      place-items:center;
      gap:14px;
      width:100%;
    }
    #loaderAnim{
      width: clamp(var(--anim-min), var(--anim-fluid), var(--anim-max));
      height: clamp(var(--anim-min), var(--anim-fluid), var(--anim-max));
      display:block;
      margin:auto;
    }

    /* نوار شیشه‌ای */
    .glass-bar{
      position:relative;
      width: clamp(var(--bar-w-min), var(--bar-w-fluid), var(--bar-w-max));
      height: var(--bar-h);
      border-radius: 12px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02)) border-box,
        linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.06)) padding-box;
      border: 1px solid rgba(255,255,255,.18);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.10),
        inset 0 -8px 18px rgba(0,0,0,.10),
        0 6px 22px rgba(0,0,0,.18);
      overflow:hidden;
      display:grid;
      place-items:center;
    }

    .glass-bar .text{
      position: relative;
      z-index: 3;
      color: var(--ink);
      font-weight: 600;
      letter-spacing: 0.2px;
      font-size: clamp(13px, 1.9vmin, 16px);
      text-align: center;
      padding: 0 14px;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
      white-space: nowrap;
    }

    /* پیشروی: با متغیر --p کنترل می‌شود */
    .glass-bar .fill{
      position:absolute; top:0; bottom:0; left:0;
      width: var(--p);
      background: linear-gradient(90deg, rgba(64,199,120,.35) 0%, rgba(64,199,120,.55) 50%, rgba(64,199,120,.35) 100%);
      box-shadow: inset 0 0 0 1px rgba(64,199,120,.28), 0 2px 18px rgba(64,199,120,.28);
      z-index:1;
      will-change: width;
    }
    /* کلاهک نوری در لبهٔ پیشروی (چسبیده به راستِ .fill) */
    .glass-bar .fill::after{
      content:"";
      position:absolute; top:0; bottom:0; right:-1px;
      width: var(--cap-w);
      background: linear-gradient(90deg,
                  rgba(255,255,255,0) 0%,
                  rgba(255,255,255,var(--cap-alpha)) 55%,
                  rgba(255,255,255,0) 100%);
      filter: blur(.4px);
      mix-blend-mode: screen;
      opacity:.9;
      pointer-events:none;
    }

    /* خط نوری اصلی: دقیقاً روی مرز پیشروی، حرکت نرم */
    .glass-bar .shine{
      position:absolute; top:0; height:100%;
      /* مرکز نور = لبهٔ پیشروی */
      left: calc(var(--p) - (var(--shine-w) / 2));
      width: var(--shine-w);
      z-index:2;
      pointer-events:none;
      mix-blend-mode: screen;
      opacity: .85;
      background: linear-gradient(90deg,
                  rgba(255,255,255,0) 0%,
                  rgba(255,255,255,var(--shine-alpha)) 48%,
                  rgba(255,255,255,0) 100%);
      filter: blur(.2px);
      will-change: left;
    }

    /* نسخه */
    .version{
      font-size:13px;
      color:var(--muted);
      letter-spacing:.3px;
      text-align:center;
    }

    /* کپی‌رایت */
    .credits{
      position:fixed; left:0; right:0; bottom:8px;
      display:flex; justify-content:center; pointer-events:none;
      font-size:12px; color:var(--muted); text-shadow:0 1px 0 rgba(0,0,0,.25);
    }
    .credits-inner{ position:relative; min-height:1.5em; display:flex; align-items:center; justify-content:center; }
    .credit{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
      opacity:0; transform:translateY(6px); filter:blur(2px);
      transition:opacity .7s ease, transform .7s ease, filter .7s ease;
      white-space:nowrap; text-align:center;
    }
    .credit.show{ opacity:1; transform:none; filter:none; }
    .credit-en{ direction:ltr; } .credit-fa{ direction:rtl; }

    @media (max-width:480px){
      .title-banner{ width: clamp(220px, 56vw, 420px); }
      :root{ --bar-h: 44px; }
    }
    @media (prefers-reduced-motion: reduce){
      .glass-bar .shine{ display:none; }
      .glass-bar .fill::after{ display:none; }
    }
  </style>
</head>
<body>
  <div class="page" aria-label="درگاه پرداخت">
    <!-- عنوان تصویری -->
    <header class="top" aria-label="سرتیتر">
      <img class="title-banner" src="images/logo/title.png" alt="درگاه پرداخت گروه جهادی بسیج شهدای سازمان تامین اجتماعی">
    </header>

    <!-- لودینگ Lottie + نوار شیشه‌ای -->
    <section class="loader" aria-live="polite" aria-busy="true">
      <dotlottie-player
        id="loaderAnim"
        src="images/logo/sandy-loading.lottie"
        autoplay
        loop
        speed="1"
      ></dotlottie-player>

      <!-- نوار شیشه‌ای -->
      <div class="glass-bar" role="progressbar" aria-label="پیشرفت بارگذاری" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div class="fill"></div>
        <div class="shine"></div>
        <span class="text">در حال آماده‌سازی صفحه درگاه پرداخت…</span>
      </div>
    </section>

    <!-- نسخه -->
    <div class="version" aria-label="نسخه">نسخه 6.7.2</div>
  </div>

  <!-- کپی‌رایت پایین صفحه با تبدیل ۴ ثانیه‌ای -->
  <footer class="credits" aria-hidden="false">
    <div class="credits-inner">
      <span id="credit-en" class="credit credit-en">Built with care and love by Mahdi Bagheban.</span>
      <span id="credit-fa" class="credit credit-fa">با دقت و عشق توسط مهدی باغبانپور ساخته شده است.</span>
    </div>
  </footer>

  <script>
    "use strict";
    // نمایش کپی‌رایت: EN → FA پس از ۴ ثانیه
    const creditEN = document.getElementById("credit-en");
    const creditFA = document.getElementById("credit-fa");
    creditEN.classList.add("show");
    setTimeout(function(){ creditEN.classList.remove("show"); creditFA.classList.add("show"); }, 4000);

    // همگام‌سازی کامل با یک زمان‌سنج واحد و easing نرم
    const bar = document.querySelector(".glass-bar");
    const start = performance.now();
    const DURATION = 8000; // ms

    // تابع ease نرم (cubic)
    const easeInOutCubic = (x) => (x < 0.5) ? 4*x*x*x : 1 - Math.pow(-2*x + 2, 3)/2;

    function raf(now){
      const t = Math.min(1, (now - start)/DURATION);  // 0..1
      const te = easeInOutCubic(t);
      const pct = Math.round(te*100);

      // بروزرسانی ARIA و متغیر CSS مشترک
      bar.setAttribute("aria-valuenow", pct);
      bar.style.setProperty('--p', (te*100).toFixed(2) + '%');

      if(t < 1){ requestAnimationFrame(raf); }
    }
    requestAnimationFrame(raf);

    // هدایت به فرم کارت‌ها پس از پایان
    setTimeout(function(){ window.location.href = "cards-form.html"; }, DURATION);
  </script>
</body>
</html>
<!-- ساخته شده توسط مهدی باغبانپور بروجنی -->
