/* فونت‌ها */
@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-Regular.woff2') format('woff2');font-weight:400;font-style:normal;font-display:swap}
@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-Medium.woff2') format('woff2');font-weight:500;font-style:normal;font-display:swap}
@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-SemiBold.woff2') format('woff2');font-weight:600;font-style:normal;font-display:swap}
@font-face{font-family:'Vazirmatn';src:url('fonts/Vazirmatn-Bold.woff2') format('woff2');font-weight:700;font-style:normal;font-display:swap}
*{box-sizing:border-box;font-family:'Vazirmatn',sans-serif}

/* متغیرها */
:root{
  --green-main-day:#1E5939;
  --green-main-night:#143622;
  --green-grad-day:linear-gradient(135deg,#1E5939 0%,#28744a 100%);
  --green-grad-night:linear-gradient(135deg,#143622 0%,#224D36 100%);
  --color-text-day:#fff;
  --color-text-night:#e8f2e8;
  --card-size-desktop:130px;
  --card-size-tablet:110px;
  --card-size-mobile:140px;
  --glow-base: 0 12px 24px rgba(0,0,0,.18), 0 0 20px rgba(64,182,119,.10);
  --glow-hover: 0 22px 44px rgba(40,116,74,.48), 0 0 46px 12px rgba(64,182,119,.34);
  --glow-active: 0 14px 28px rgba(0,0,0,.28), 0 0 58px 16px rgba(64,182,119,.44);
}

/* پایه */
body{margin:0;background:#0f2414;color:var(--color-text-night);transition:background 1.2s,color 1.2s}
body:not(.night-mode){background:#FCFADF;color:var(--green-main-day)}

/* هدر و عنوان */
.header-bar{background:var(--green-main-day);padding:28px 16px 18px;text-align:center;transition:background 1.2s;position:relative;z-index:5000}
body.night-mode .header-bar{background:var(--green-main-night)}
.header-title{
  color:var(--color-text-day);background:var(--green-grad-day);font-weight:800;font-size:1.24rem;
  padding:.85rem 2.4rem;border-radius:999px;box-shadow:0 6px 18px rgba(0,0,0,.08);
  letter-spacing:.4px;line-height:1.15;display:block;max-width:100%;margin:0 auto;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none
}
body.night-mode .header-title{background:var(--green-grad-night);color:var(--color-text-night)}
.controls-row{display:none}

/* زمینه و فاصله کارت‌ها */
.cards-bg-green{background:var(--green-grad-day);background-size:400% 400%;animation:bgd 14s ease infinite;transition:background 1.2s;margin:0 auto;padding:46px 6vw 30px;min-height:88vh}
@keyframes bgd{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
body.night-mode .cards-bg-green{background:var(--green-grad-night);animation:bgn 12s ease-in-out infinite}
@keyframes bgn{0%{background-position:100% 0%}50%{background-position:0% 90%}100%{background-position:100% 0%}}

/* شبکه کارت‌ها */
.cards-container{display:grid;gap:32px;justify-content:center;margin:12px auto 0;max-width:1200px;overflow:visible}
.cards-container.view-small{grid-template-columns:repeat(5,var(--card-size-desktop))}
.cards-container.view-big{grid-template-columns:repeat(4,1fr)}
@media (max-width:1100px){.cards-container.view-small{grid-template-columns:repeat(4,var(--card-size-tablet))}.cards-container.view-big{grid-template-columns:repeat(3,1fr)}}
@media (max-width:800px){.cards-container.view-small{grid-template-columns:repeat(3,var(--card-size-tablet))}.cards-container.view-big{grid-template-columns:repeat(2,1fr)}}
@media (max-width:560px){.cards-container.view-small{grid-template-columns:repeat(2,var(--card-size-mobile))}.cards-container.view-big{grid-template-columns:repeat(2,1fr)}}

/* کارت و تزئینات */
.card-wrap{position:relative;display:flex;align-items:center;justify-content:center;transition:opacity .2s;z-index:1}
.card-deco.narges{position:absolute;z-index:1;pointer-events:none;opacity:0;transform:rotate(45deg) scale(.525);transition:transform .35s ease,opacity .35s ease,top .35s,left .35s,right .35s,bottom .35s}
.narges-tl{width:88px;height:88px;background:url('images/decorations/narges1.png') no-repeat center/contain;top:-28px;left:-24px}
.card-wrap.card-ready .narges-tl{opacity:.98;transform:rotate(0deg) scale(1)}
.card-wrap:hover .narges-tl{transform:rotate(-5deg) scale(1.12);top:-34px;left:-28px}
.card-wrap.active-press .narges-tl{transform:rotate(10deg) scale(1.15)}
.narges-br{width:66px;height:66px;background:url('images/decorations/narges2.png') no-repeat center/contain;bottom:-22px;right:-18px;clip-path: inset(0 0 0 22%)}
.card-wrap.card-ready .narges-br{opacity:.98;transform:rotate(0deg) scale(.82)}
.card-wrap:hover .narges-br{transform:rotate(-5deg) scale(.94);bottom:-26px;right:-22px}
.card-wrap.active-press .narges-br{transform:rotate(10deg) scale(.98)}

.card{
  position:relative;width:100%;border-radius:20px;overflow:hidden;cursor:pointer;
  background:rgba(255 255 255/.22);box-shadow:var(--glow-base);backdrop-filter:blur(8px);
  transition:transform .18s cubic-bezier(.18,.72,.2,1),box-shadow .18s cubic-bezier(.18,.72,.2,1),filter .18s,opacity .18s;
  display:flex;align-items:center;justify-content:center;border:1px solid rgba(255 255 255/.22);z-index:2;
  transform:translateY(-60px);opacity:0;pointer-events:none
}
body.night-mode .card{background:rgba(255,255,255,.12)}
.card.hovered{transform:translateY(-8px) scale(1.035)!important;box-shadow:var(--glow-hover);filter:saturate(1.06)}
.card.pressed{transform:translateY(2px) scale(.982)!important;box-shadow:var(--glow-active);filter:saturate(1.08)}
.card::after{content:'';position:absolute;inset:-4px;border-radius:24px;z-index:0;background:radial-gradient(60% 50% at 50% 60%, rgba(90,200,140,.42), rgba(90,200,140,0) 58%),radial-gradient(50% 40% at 50% 40%, rgba(255,255,255,.34), rgba(255,255,255,0) 70%);opacity:0;transition:opacity .16s ease,filter .16s ease}
.card.hovered::after,.card.pressed::after{opacity:1}
.card.pressed::after{filter:blur(2.2px)}
.basij-flash{position:absolute;inset:0;border-radius:20px;pointer-events:none;opacity:0;z-index:3;background:url('images/logo/basij-logo.png') no-repeat center/60%;filter:drop-shadow(0 0 10px rgba(255,255,255,.08));transition:opacity .35s ease}
.card.flash .basij-flash{opacity:.18}

.card img{display:block;width:100%;height:100%;min-height:88px;object-fit:cover;border-radius:20px;position:relative;z-index:1}
.card-overlay{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(0deg,#1e5939 0%,rgba(30,89,57,.8) 55%,rgba(30,89,57,0) 100%);border-radius:0 0 20px 20px;padding:0 8px 10px;display:flex;align-items:flex-end;justify-content:center;z-index:2;height:52px}
.card-title{background:rgba(255,255,255,.9);font-weight:700;font-size:.82rem;line-height:1.22;padding:6px 14px;border-radius:12px;color:#1E5939;box-shadow:0 6px 20px rgba(30,89,57,.12);white-space:normal;text-align:center;max-width:90%}

/* لوگو کارت */
.basij-logo{position:absolute;top:12px;right:12px;width:30px;height:30px;background:url('images/logo/basij-logo.png') no-repeat center/contain;z-index:4;pointer-events:none;opacity:.95;filter:drop-shadow(0 2px 4px rgba(0,0,0,.25));transition:transform .15s ease,filter .15s ease}
.card.hovered .basij-logo{transform:translate(-1px,-2px) scale(1.08);filter:drop-shadow(0 3px 7px rgba(0,0,0,.3))}
.card.pressed .basij-logo{transform:translate(0,0) scale(.98);filter:drop-shadow(0 1px 3px rgba(0,0,0,.22))}

/* دکمه‌های کناری دسکتاپ */
.desktop-fixed{position:fixed;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:14px;z-index:6000}
.view-switcher.desktop-fixed{left:18px}
.day-night-switcher.desktop-fixed{right:18px}
.view-switcher button,.day-night-switcher button{
  background:rgba(255,255,255,.24);border:none;border-radius:12px;width:46px;height:40px;cursor:pointer;padding:0;
  display:flex;align-items:center;justify-content:center; /* وسط‌چینی مطمئن آیکن‌ها */
}
.view-switcher button:hover,.day-night-switcher button:hover{background:rgba(255,255,255,.4)}
.view-switcher button.active,.day-night-switcher button.active{background:rgba(255,255,255,.95);box-shadow:0 0 12px rgba(40,116,74,.4)}
.png-icon{display:inline-flex;width:24px;height:24px;align-items:center;justify-content:center}
.png-icon img{display:block;width:24px;height:24px}

/* Tooltip */
.tooltip{position:relative}
.tooltip[data-tooltip]:hover::after{
  content:attr(data-tooltip);
  position:absolute; top:-34px; left:50%; transform:translateX(-50%);
  background:#fff; color:#28744a; font-weight:600; font-size:.95rem;
  padding:6px 14px; border-radius:10px; box-shadow:0 4px 15px rgba(30,89,57,.12);
  white-space:nowrap; opacity:1; z-index:7000;
}

/* Dropdown شیشه‌ایِ خواناتر */
.dropdown-menu{
  position:fixed; min-width:220px; max-width:320px; max-height:75vh; overflow-y:auto; z-index:6500;
  background:rgba(255,255,255,.38); /* پس‌زمینه روشن‌تر */
  border:1.6px solid rgba(255,255,255,.55); /* هاله سفید نرم */
  border-radius:18px;
  box-shadow:0 12px 30px rgba(30,60,36,.22);
  font-weight:800; color:#1c2f17;   /* متن تیره‌تر برای کنتراست بهتر */
  padding:18px 22px 18px 18px;
  -webkit-backdrop-filter: blur(18px) saturate(120%);
  backdrop-filter: blur(18px) saturate(120%);         /* شیشه‌ای واقعی */ /* MDN backdrop-filter */
  animation:dropdownShow .42s cubic-bezier(.16,.75,.72,.95);
  opacity:0; transform:translateY(-36px) scale(.95);
}
.dropdown-menu.show{opacity:1;transform:translateY(0) scale(1);transition:opacity .28s,transform .31s}
@keyframes dropdownShow{0%{opacity:0;transform:translateY(-36px) scale(.92)}100%{opacity:1;transform:translateY(0) scale(1)}}
.dropdown-menu ul{list-style:none;margin:0;padding:0;position:relative;z-index:1}
.dropdown-menu li{
  padding:12px 14px 12px 8px;border-radius:11px;margin:7px 0;cursor:pointer;position:relative;
  color:#1f3c1a; background:transparent; transition:filter .13s, box-shadow .13s; /* متن ثابتِ تیره */
  box-shadow:0 0 0 0 rgba(255,255,255,0);             /* بدون هاله در حالت عادی */
}
.dropdown-menu li:hover,.dropdown-menu li.expanded{
  background:rgba(255,255,255,.12);                   /* روشن‌تر، نه کم‌رنگ‌تر */
  color:#1f3c1a;                                      /* رنگ متن ثابت و تیره */
  box-shadow:0 0 0 2px rgba(255,255,255,.65);         /* هاله سفید نرم هنگام hover */
}
.dropdown-menu li>span{display:inline-block}
.dropdown-menu li>span::after{content:'›';display:inline-block;margin-right:10px;color:#28744a;font-weight:700;font-size:1.2rem;vertical-align:middle;transition:transform .3s}
.dropdown-menu li.expanded>span::after{transform:rotate(90deg)}
.dropdown-menu ul ul{margin-top:6px;border-right:2px solid rgba(255,255,255,.35);padding-right:14px}
.dropdown-menu li ul{display:none}
.dropdown-menu li.expanded>ul{display:block}
.dropdown-menu a{display:block;padding:.18em 0;text-decoration:none;color:inherit;font-weight:800}

/* — موبایل: یک‌خط شدن ردیف دکمه‌ها + آیکن وسط قاب + شفافیت آیکن‌های اندازه کارت — */
@media (max-width:650px){
  .header-bar{padding:18px 4vw 6px}
  .header-title{font-size:.94rem;padding:.68rem 1.4rem;text-decoration:none}
  .controls-row{
    display:flex!important;align-items:center;justify-content:space-between;flex-wrap:nowrap;gap:10px;
    width:100%;margin:14px 0 34px 0;padding:0 6px;
  }
  .controls-row .view-switcher,.controls-row .day-night-switcher{
    display:flex;flex-direction:row;gap:7px;align-items:center;flex:0 0 auto;min-width:0
  }
  .controls-row .view-switcher button,.controls-row .day-night-switcher button{
    width:35px;height:32px;border-radius:10px;padding:0;min-width:0;display:flex;align-items:center;justify-content:center
  }
  /* آیکن‌ها وسط قاب و کمی شفاف‌تر برای دکمه‌های اندازه کارت */
  .controls-row .view-switcher .png-icon img{width:17px;height:17px;opacity:.72} /* شفاف‌تر برای هماهنگی بصری */ /* CSS filter/opacity */
  .controls-row .day-night-switcher .png-icon img{width:17px;height:17px;opacity:.94}
  .desktop-fixed{display:none!important}
  .cards-bg-green{padding-top:64px}
  .cards-container{margin-top:12px}
}

/* تیتر بزرگ‌تر در نمایش‌های خیلی بزرگ */
@media (min-width:1200px){ .header-title{font-size:1.34rem} }

/* انیمیشن منو */
@keyframes dropdownShow{0%{opacity:0;transform:translateY(-36px) scale(.92)}100%{opacity:1;transform:translateY(0) scale(1)}}
